!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},o=e.parcelRequireeb0a;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){i[t]=e},e.parcelRequireeb0a=o),o("gTwGg").register(JSON.parse('{"39PhU":"app.73c9f553.js","6ZGgG":"green-tomato.11c22c57.png","7EiQF":"red-tomato.0725a987.png","7WrkD":"favicon.24616066.ico","kTaRP":"favicon.24616066.ico","hrA6o":"notification-ping.09726ea8.mp3","kos78":"app.f2cedd7c.js"}'));var r=o("kN4dt"),a=o("6RjbW"),s=o("2tlwz"),c=o("9wqlD"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs"),f=o("jm4w9"),h={},p={};(p=function(t){if(Array.isArray(t))return t}).__esModule=!0,p.default=p;var v={};(v=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}).__esModule=!0,v.default=v;var m={},y={};(y=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}).__esModule=!0,y.default=y,(m=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}).__esModule=!0,m.default=m;var k={};(k=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}).__esModule=!0,k.default=k,(h=function(t,e){return p(t)||v(t,e)||m(t,e)||k()}).__esModule=!0,h.default=h;a=o("6RjbW"),s=o("2tlwz"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs"),f=o("jm4w9"),a=o("6RjbW"),s=o("2tlwz");var g=o("lt755"),b=function(){function e(){t(a)(this,e);var n=JSON.parse(g.get("TaskList"));null==n?this.reset():(this.todo=n.todo,this.completed=n.completed)}return t(s)(e,[{key:"reset",value:function(){this.todo=[],this.completed=[],this.save()}},{key:"save",value:function(){g.set("TaskList",JSON.stringify({todo:this.todo,completed:this.completed}))}},{key:"createTask",value:function(t,e){var n={name:t,expected:e,actual:0,time:0};this.todo.push(n),this.save()}},{key:"deleteTask",value:function(t){this.todo.splice(t,1),this.save()}},{key:"updateTask",value:function(t,e,n){t>=Object.keys(this.todo).length||(this.todo[t].name=e,this.todo[t].expected=n,this.save())}},{key:"addPomo",value:function(){this.todo[0].actual+=1,this.save()}},{key:"finishTask",value:function(t){t&&this.updateTime();var e=this.todo[0];this.completed.push(e),this.deleteTask(0)}},{key:"startTask",value:function(){this.startTime=Date.now()}},{key:"updateTime",value:function(){var t=(Date.now()-this.startTime)/1e3,e=60*g.get("WorkSessionDuration");this.todo[0].time+=t;var n=this.todo[0].time,i=Math.round(n/e);this.todo[0].actual=i,this.save()}}]),e}();function T(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var w=function(e){t(u)(i,e);var n=T(i);function i(e){var o;return t(a)(this,i),(o=n.call(this)).editableTaskList=e,o.template=document.querySelector("#task-row-template").content,o.data=new b,o.resetEditingState(),o.data.todo.forEach((function(t,e){var n=t.name,i=t.expected;o.insertRow(e+1,n,i)})),o.connected=!1,o}return t(s)(i,[{key:"connectedCallback",value:function(){this.connected=!0}},{key:"addRow",value:function(t,e){this.data.createTask(t,Number(e)),this.insertRow(this.data.todo.length,t,e),this.editableTaskList.updateButtonState()}},{key:"resetEditingState",value:function(){this.editingRow=null,this.editingInputs=null,this.originalValues=null}},{key:"editRow",value:function(t,e){this.editingRow&&this.cancelEdit(),this.editingRow=t,this.editingInputs=e,this.originalValues=e.map((function(t){return t.value})),t.classList.add("edit-mode"),e.forEach((function(t){t.disabled=!1})),e[0].focus(),e[0].setSelectionRange(e[0].value.length,e[0].value.length)}},{key:"removeRow",value:function(t){this.editingRow&&this.cancelEdit(),this.data.deleteTask(Number(t.dataset.id)),t.remove(),Array.from(this.children).forEach((function(t,e){t.querySelector("input").value=e+1,t.dataset.id=e})),this.editableTaskList.updateButtonState()}},{key:"saveEdit",value:function(){var e=this.editingInputs.map((function(t){return t.value})),n=t(h)(e,2),i=n[0],o=n[1];this.data.updateTask(Number(this.editingRow.dataset.id),i,Number(o)),this.originalValues=[i,o],this.cancelEdit()}},{key:"cancelEdit",value:function(){var t=this;this.editingRow.classList.remove("edit-mode"),this.editingInputs.forEach((function(e,n){e.disabled=!0,e.value=t.originalValues[n]})),this.resetEditingState()}},{key:"insertRow",value:function(){for(var e=this,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var r=this.template.cloneNode(!0);this.appendChild(r);var a=this.lastElementChild,s=a.querySelectorAll("input"),c=Array.from(s).slice(-2),u=a.querySelectorAll("button"),l=t(h)(u,4),d=l[0],f=l[1],p=l[2],v=l[3],m=i[0];a.dataset.id=m-1,s.forEach((function(t,e){t.value=i[e]})),this.connected&&a.querySelector("tomato-slider").render(),c.forEach((function(n){n.addEventListener("keyup",(function(t){"Enter"!==t.code||p.disabled||e.saveEdit()})),n.addEventListener("input",(function(){var e=t(h)(c,2),n=e[0],i=e[1];0===n.value.length||Number(i.value)<1?p.disabled=!0:p.disabled=!1}))})),d.addEventListener("click",(function(){p.disabled=!1,e.editRow(a,c)})),f.addEventListener("click",(function(){e.removeRow(a)})),p.addEventListener("click",(function(){e.saveEdit()})),v.addEventListener("click",(function(){e.cancelEdit()}))}}]),i}(t(f)(HTMLElement));customElements.define("editable-task-list-body",w);var R=w;a=o("6RjbW"),s=o("2tlwz"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs");function E(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var S=function(e){t(u)(i,e);var n=E(i);function i(){var e;t(a)(this,i),e=n.call(this);var o=document.querySelector("#add-row-template").content.cloneNode(!0);e.appendChild(o);var r=e.querySelectorAll("input"),s=t(h)(r,2);return e.nameInput=s[0],e.expectedInput=s[1],e.button=e.querySelector("button"),[e.nameInput,e.expectedInput].forEach((function(t){t.addEventListener("input",(function(){e.updateButtonState()}))})),[e.nameInput,e.expectedInput].forEach((function(t){t.addEventListener("keyup",(function(t){"Enter"!==t.code||e.button.disabled||e.addRow()}))})),e.button.addEventListener("click",(function(){e.addRow()})),e.resetCount=0,e}return t(s)(i,[{key:"connectedCallback",value:function(){this.reset()}},{key:"updateButtonState",value:function(){0===this.nameInput.value.length?this.button.disabled=!0:this.button.disabled=!1}},{key:"addRow",value:function(){this.previousElementSibling.addRow(this.nameInput.value,this.expectedInput.value),this.reset()}},{key:"reset",value:function(){this.nameInput.value="",this.expectedInput.value="1",this.nameInput.focus(),this.updateButtonState(),this.resetCount>0&&this.querySelector("tomato-slider").render(),this.resetCount+=1}}]),i}(t(f=o("jm4w9"))(HTMLElement));customElements.define("editable-task-list-input",S);var L=S;function C(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var x=function(e){t(u)(i,e);var n=C(i);function i(){var e;t(a)(this,i),(e=n.call(this)).appendChild(document.querySelector("#edit-title-template").content.cloneNode(!0));var o=document.createElement("div");return o.classList.add("task-list-container"),e.appendChild(o),o.appendChild(document.querySelector("#edit-header-row-template").content.cloneNode(!0)),e.body=new R(t(c)(e)),o.appendChild(e.body),o.appendChild(new L),e}return t(s)(i,[{key:"connectedCallback",value:function(){this.updateButtonState()}},{key:"updateButtonState",value:function(){var t=this;this.querySelectorAll(".start-day-button").forEach((function(e){e.disabled=!(t.body.data.todo.length>0)}))}}]),i}(t(f)(HTMLElement));customElements.define("editable-task-list",x);var B=x;a=o("6RjbW"),s=o("2tlwz"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs"),f=o("jm4w9"),a=o("6RjbW"),s=o("2tlwz"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs");function N(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var q=function(e){t(u)(i,e);var n=N(i);function i(e,o){var r;return t(a)(this,i),(r=n.call(this)).headerRowTemplate=document.querySelector("#view-header-row-template").content,r.rowTemplate=document.querySelector("#view-row-template").content,r.insertTitle(e),r.insertHeaderRow(),o.forEach((function(t,e){var n=t.name,i=t.expected,o=t.actual;r.insertRow(e+1,n,i,o)})),r}return t(s)(i,[{key:"insertTitle",value:function(t){var e=document.createElement("h3");e.classList.add("fw-bold","mb-0","ms-2"),e.textContent=t,this.appendChild(e)}},{key:"insertHeaderRow",value:function(){this.appendChild(this.headerRowTemplate.cloneNode(!0))}},{key:"insertRow",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=this.rowTemplate.cloneNode(!0);this.appendChild(i);var o=this.lastElementChild,r=o.querySelectorAll("span");r.forEach((function(t,n){t.textContent=e[n]}))}}]),i}(t(f=o("jm4w9"))(HTMLElement));customElements.define("view-only-task-list-section",q);var P=q;function A(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var H=function(e){t(u)(i,e);var n=A(i);function i(){var e;return t(a)(this,i),(e=n.call(this)).data=new b,e.appContainer=document.querySelector(".app-container"),e.appHeader=document.querySelector(".app-header"),e.visible=!1,e.taskListTitle=document.createElement("h2"),e.taskListTitle.classList.add("subtitle","text-center","mt-2","mb-2"),e.taskListContainer=document.createElement("div"),e.taskListContainer.classList.add("task-list-container"),e.appendChild(e.taskListTitle),e.appendChild(e.taskListContainer),e.taskListTitle.addEventListener("click",(function(){e.visible=!e.visible,e.position()})),window.addEventListener("resize",(function(){e.position()})),e.render(),e}return t(s)(i,[{key:"connectedCallback",value:function(){this.position()}},{key:"render",value:function(){for(;this.taskListContainer.firstChild;)this.taskListContainer.removeChild(this.taskListContainer.firstChild);this.taskListContainer.appendChild(new P("To Do",this.data.todo)),this.data.completed.length>0&&this.taskListContainer.appendChild(new P("Completed",this.data.completed))}},{key:"position",value:function(){this.visible?(this.taskListTitle.innerHTML='<i class="fas fa-chevron-down"></i>',this.style.top="".concat(this.appHeader.offsetHeight,"px")):(this.taskListTitle.innerHTML='<i class="fas fa-chevron-up"></i>',this.style.top="".concat(this.appContainer.offsetHeight-(this.querySelector(".task-list-container").getBoundingClientRect().top-this.getBoundingClientRect().top),"px"))}},{key:"addPomo",value:function(){this.data.addPomo(),this.render()}},{key:"finishTask",value:function(t){this.data.finishTask(t),this.render()}},{key:"startTask",value:function(){this.data.startTask()}},{key:"updateTime",value:function(){this.data.updateTime(),this.render()}}]),i}(t(f)(HTMLElement));customElements.define("view-only-task-list",H);var I=H,M=(a=o("6RjbW"),s=o("2tlwz"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs"),f=o("jm4w9"),a=o("6RjbW"),s=o("2tlwz"),function(){function e(n,i,o){t(a)(this,e),n>99&&(n=99),this.minutes=n,i>59&&(i=59),this.seconds=i,this.callbackEverySecond=o}return t(s)(e,[{key:"startTimer",value:function(){var t=this;return new Promise((function(e){var n="Timer Finished";0===t.seconds&&0===t.minutes&&e(n);var i=Math.floor(Date.now()/1e3)+60*t.minutes+(t.seconds-1);t.timer(i);var o=setInterval((function(){0===t.seconds&&0===t.minutes&&(e(n),clearInterval(o)),t.timer(i)}),1e3)}))}},{key:"timer",value:function(t){var e=t-Math.floor(Date.now()/1e3);e<=0&&(e=0),this.minutes=Math.floor(e/60),this.seconds=e%60,null!==this.callbackEverySecond&&this.callbackEverySecond(this.minutes,this.seconds)}}]),e}()),_=o("lpe0u");g=o("lt755");function D(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var j=function(e){t(u)(i,e);var n=D(i);function i(){var e;return t(a)(this,i),(e=n.call(this)).theme=g.get("Icon"),e.classList.add("w-100","h-100","d-flex","flex-column","align-items-center"),e.innerHTML='\n      <div class="timer-container position-relative mh-100 mw-100">\n        <object id="timerIcon" class="w-100 h-100 position-absolute top-50 start-50 translate-middle" data='.concat(_.default[e.theme].urls[1],"></object>\n      </div>\n    "),e.text="START",e}return t(s)(i,[{key:"reset",value:function(){this.text="START",this.getAttribute("icon-text")&&(this.setAttribute("icon-text","START"),this.classList.remove("timer-active"))}},{key:"createTimer",value:function(t,e){var n=this,o=new Event("timerTick");this.timer=new M(t,e,(function(t,e){var r=i.parseMinutes(t),a=i.parseSeconds(e);n.svgText.textContent="".concat(r," : ").concat(a),o.text="".concat(r,":").concat(a),document.dispatchEvent(o)}))}},{key:"startTimer",value:function(){return this.text="".concat(i.parseMinutes(this.timer.minutes)," : ").concat(i.parseSeconds(this.timer.seconds)),this.classList.add("timer-active"),this.timer.startTimer()}},{key:"setPomoIcon",value:function(){this.querySelector("#timerIcon").setAttribute("data",_.default[this.theme].urls[1])}},{key:"setBreakIcon",value:function(){this.querySelector("#timerIcon").setAttribute("data",_.default[this.theme].urls[2])}},{key:"render",value:function(){var t=this,e=this.querySelector("#timerIcon");e.addEventListener("load",(function(){var n=e.contentDocument;n.querySelector("svg").classList.value="w-100 h-100 position-absolute top-50 start-50 translate-middle",t.icon=n.querySelector("svg > g"),t.icon.classList.value="timer-image",t.icon.addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("iconclick"),{bubbles:!0})})),t.svgText=n.querySelector(".timer-text"),t.svgText.textContent=t.text}))}},{key:"connectedCallback",value:function(){this.render()}},{key:"attributeChangedCallback",value:function(){this.svgText.textContent=this.text}}],[{key:"parseMinutes",value:function(t){return t<10?"0".concat(String(t)):String(t)}},{key:"parseSeconds",value:function(t){return 60===t||t>=60?"00":t<10?"0".concat(String(t)):String(t)}},{key:"observedAttributes",get:function(){return["icon-text"]}}]),i}(t(f)(HTMLElement));customElements.define("pomo-timer",j);var O=j;a=o("6RjbW"),s=o("2tlwz"),c=o("9wqlD"),u=o("8pxQ1"),l=o("17uBT"),d=o("D7RPs"),f=o("jm4w9"),r=o("kN4dt"),g=o("lt755");function F(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=t(d)(e);if(n){var r=t(d)(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return t(l)(this,i)}}var W=function(e){t(u)(i,e);var n=F(i);function i(e){var o;return t(a)(this,i),(o=n.call(this)).button=document.createElement("button"),o.button.classList.add("btn","btn-success","btn-lg"),o.updateButton(),o.button.addEventListener("click",(function(){var n={};n=o.length>1?{title:"Move on to next task?",subtitle:" ",leftButton:"Yes",rightButton:"No"}:{title:"End session?",subtitle:" ",leftButton:"Yes",rightButton:"No"},r.default.prompt(n,!0).then((function(n){"left"===n?(o.checked=!0,e.bind(t(c)(o),t(c)(o))(),r.default.hide()):"right"===n&&r.default.hide()}))})),o.appendChild(o.button),o}return t(s)(i,[{key:"getChecked",value:function(){return this.checked}},{key:"updateButton",value:function(){this.checked=!1,this.taskList=JSON.parse(g.get("TaskList")),null!=this.taskList&&(this.length=this.taskList.todo.length,this.button.textContent=this.taskList&&this.length>1?"Finish Task":"Finish Final Task")}}]),i}(t(f)(HTMLElement));customElements.define("finish-task-button",W);var U,z=W,G=o("ly7tL");g=o("lt755");U=o("ai42B").getBundleURL("39PhU")+o("gTwGg").resolve("6ZGgG");var J;J=o("ai42B").getBundleURL("39PhU")+o("gTwGg").resolve("7EiQF");var Q;Q=o("ai42B").getBundleURL("39PhU")+o("gTwGg").resolve("7WrkD");var V,Y=new URL(Q);V=o("ai42B").getBundleURL("39PhU")+o("gTwGg").resolve("hrA6o");var Z=new URL(V),$=document.querySelector(".app-container"),K=document.querySelector("link[rel*='icon']"),X=document.querySelector("menu-icons"),tt=!1,et=null,nt="Electric Pomato";function it(){var t=Number(g.get("CurrentPomos"));return t>0&&t%4==0}function ot(t){document.title="".concat(t.text," - ").concat(nt)}function rt(){var t=JSON.parse(g.get("History")),e=JSON.parse(g.get("TaskList")).completed,n=new Date,i={date:"".concat(n.getMonth()+1,"/").concat(n.getDate(),"/").concat(n.getFullYear()),tasklist:e};t?t.sessions.push(i):t={sessions:[i]},g.set("History",JSON.stringify(t)),g.clearSessionData();var o=document.querySelector("stats-modal");G.default.hasEnoughSessions()?o.open("./index.html"):window.location.href="./index.html"}function at(t){var e=JSON.parse(g.get("TaskList")),n=e.todo.length,i=document.querySelector(".app-title"),o=document.querySelector(".app-subtitle"),r="";"true"!==g.get("Timer")||t?it()?i.textContent="Long Break":i.textContent="Short Break":i.textContent="Pomodoro",0===n?(r="End of Session",tt=!0,rt()):"true"===g.get("Timer")?t?i.textContent="Focus: ".concat(e.todo[0].name):r="Focus: ".concat(e.todo[0].name):r=t&&n>1?"Next Task: ".concat(e.todo[0].name):1===n?"Final Task: ".concat(e.todo[0].name):"Current Task: ".concat(e.todo[0].name),o.textContent=r}function st(t){et.finishTask("true"===g.get("Timer")&&"START"!==document.querySelector(".timer-text").textContent),at(t.getChecked()),t.updateButton(),et.startTask()}function ct(t){if(0===JSON.parse(g.get("TaskList")).todo.length)rt();else{var e=g.get("Timer");t.reset(),"true"===e?(at(!1),t.setPomoIcon()):(X.defaultMode(),document.querySelector(".app-subtitle").style.display="block",at(!1),t.setBreakIcon())}}function ut(){var e=g.get("Timer"),n={icon:null,body:null,tag:"pomo-alert",silent:!0};"true"===e?(n.icon=t(U),n.body="Good Work! Time to recharge."):(n.icon=t(J),n.body="Break time is over. It's time to plug in!");var i=null;navigator.serviceWorker.getRegistration().then((function(t){i=t,t.showNotification("Electric Pomato",n).then((function(){return i.getNotifications().then((function(t){setTimeout((function(){return t.forEach((function(t){return t.close()}))}),5e3)}))})),new Audio(Z).play()}))}function lt(){var e,n,i,o=new O;et=new I,n=et,i=!1,(e=o).addEventListener("iconclick",(function(){if(!i){if(document.addEventListener("timerTick",ot),"true"===g.get("Timer")){K.href=t(U),nt="Plugged in!",X.focusMode(),n.startTask();var o=document.querySelector(".app-title"),a=document.querySelector(".app-subtitle");o.textContent=a.textContent,a.style.display="none";var s=g.get("WorkSessionDuration");e.createTimer(s,0)}else if(K.href=t(J),nt="Recharging...",it()){var c=g.get("LongBreakDuration");e.createTimer(c,0)}else{var u=g.get("ShortBreakDuration");e.createTimer(u,0)}var l=new z(st);e.appendChild(l),i=!0,e.startTimer().then((function(){if(!tt){document.removeEventListener("timerTick",ot),K.href=Y,nt="Electric Pomato",document.title=nt;var t=g.get("Timer");"true"===t&&(g.set("TotalPomos",Number(g.get("TotalPomos"))+1),g.set("CurrentPomos",Number(g.get("CurrentPomos"))+1),n.updateTime(),n.data.todo[0].actual===n.data.todo[0].expected&&r.default.prompt({title:"You have reached the expected Pomodoros for this task. Finish task or continue working?",leftButton:"Finish Task",rightButton:"Continue Working"},!1).then((function(t){"left"===t?(l.checked=!0,st(l),r.default.hide()):r.default.hide()}))),e.lastElementChild.remove(),"Notification"in window&&navigator.serviceWorker&&ut(),g.set("Timer","false"===t),ct(e),i=!1}}))}})),ct(o),$.appendChild(o),$.appendChild(et)}window.addEventListener("load",(function(){null==g.get("Username")?window.location.href="index.html":"true"===g.get("Started")?lt():(null===g.get("HasSeenInfo")&&(X.infoModal.open(),g.set("HasSeenInfo","true")),$.appendChild(new B),document.querySelector(".app-title").textContent="".concat(g.get("Username"),"'s Session"),$.querySelectorAll(".start-day-button").forEach((function(t){t.addEventListener("click",(function(){g.set("Started",!0),g.set("Timer",!0),g.set("TotalPomos",0),g.set("CurrentPomos",0),$.lastElementChild.remove(),lt()}))}))),"Notification"in window?"granted"===Notification.permission?console.log("Notifications permission ".concat(Notification.permission)):"denied"!==Notification.permission?Notification.requestPermission((function(t){"permission"in Notification||(Notification.permission=t),"granted"===t&&console.log("Notifications permission granted")})):console.log("Notifications permission ".concat(Notification.permission)):console.log("Error: Browser does not support notifications")}))}();